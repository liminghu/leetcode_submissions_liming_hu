{"id":1407345883,"question_id":353,"lang":"cpp","lang_name":"C++","time":"4 months, 1 week","timestamp":1727717047,"status":10,"status_display":"Accepted","runtime":"102 ms","url":"/submissions/detail/1407345883/","is_pending":"Not Pending","title":"Design Snake Game","memory":"67.8 MB","code":"/*\nhttps://www.jiakaobo.com/leetcode/353.%20Design%20Snake%20Game.html\nDesign a Snake game that is played on a device with screen size height x width. Play the game online if you are not familiar with the game.\nThe snake is initially positioned at the top left corner (0, 0) with a length of 1 unit.\nYou are given an array food where food[i] = (ri, ci) is the row and column position of a piece of food that the snake can eat. When a snake \neats a piece of food, its length and the game's score both increase by 1.\nEach piece of food appears one by one on the screen, meaning the second piece of food will not appear until the snake eats the first piece of food.\nWhen a piece of food appears on the screen, it is guaranteed that it will not appear on a block occupied by the snake.\nThe game is over if the snake goes out of bounds (hits a wall) or if its head occupies a space that its body occupies after moving (i.e. a snake \nof length 4 cannot run into itself).\nImplement the SnakeGame class:\nSnakeGame(int width, int height, int[][] food) Initializes the object with a screen of size height x width and the positions of the food.\nint move(String direction) Returns the score of the game after applying one direction move by the snake. If the game is over, return -1.\n1 <= width, height <= 104\n1 <= food.length <= 50\nfood[i].length == 2\n0 <= ri < height\n0 <= ci < width\ndirection.length == 1\ndirection is 'U', 'D', 'L', or 'R'.\nAt most 104 calls will be made to move.\n*/\nclass SnakeGame {\nprivate:\n    unordered_set<int> body_s; //record the snake body locations.\n    deque<int> body_q;  //record snake shape. head is the front. tail is the back.\n    int game_width;\n    int game_height;\n    int score;\n    vector<vector<int>> food_stream;\n    int foodIndex;\n\npublic:\n    SnakeGame(int width, int height, vector<vector<int>>& food) {  //[3,2,[[1,2],[0,1]]]\n        game_width = width;\n        game_height = height;\n        food_stream = food; //[[1,2],[0,1]]\n        score = 0;\n        foodIndex = 0;\n        body_q.clear();\n        body_s.clear();\n        body_q.push_front(0);  //(0,0);\n        body_s.insert(0);\n    }\n    \n    int move(string direction) { //[\"R\"],[\"D\"],[\"R\"],[\"U\"],[\"L\"],[\"U\"]\n        int head = body_q.front();\n        int rowHead = head / game_width;\n        int colHead = head % game_width;\n        switch (direction[0]) { //switch can not use string.\n            case 'U': \n                rowHead--;\n                break;     \n            case 'D': \n                rowHead++;\n                break;\n            case 'L':\n                colHead--;\n                break;\n            case 'R':\n                colHead++;\n                break;\n            default:\n                cout<<\"sth wrong!\"<<endl;\n                break;\n        }\n        int newhead = rowHead * game_width + colHead;\n        body_s.erase(body_q.back()); //remove the old tail.\n        if(rowHead<0 || rowHead == game_height || colHead<0 || colHead == game_width) //collides wall.\n            return -1;\n        if(body_s.contains(newhead)) //run into its old body.\n            return -1;\n        body_s.insert(newhead);\n        body_q.push_front(newhead); //head is at the front.\n\n        if(foodIndex < food_stream.size() && rowHead == food_stream[foodIndex][0] && colHead == food_stream[foodIndex][1]) { //if it eats, it will grow. the tail will be kept.\n            foodIndex++;\n            score++;\n            body_s.insert(body_q.back());\n            return score;\n        };\n        body_q.pop_back(); //remove its old tail from the queue.\n        return score;\n    }\n};\n\n/**\n * Your SnakeGame object will be instantiated and called as such:\n * SnakeGame* obj = new SnakeGame(width, height, food);\n * int param_1 = obj->move(direction);\n */","compare_result":"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"design-snake-game","has_notes":false,"flag_type":1}