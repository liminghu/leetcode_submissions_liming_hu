{"id":1522451242,"question_id":3678,"lang":"cpp","lang_name":"C++","time":"1 week, 3 days","timestamp":1738001964,"status":10,"status_display":"Accepted","runtime":"439 ms","url":"/submissions/detail/1522451242/","is_pending":"Not Pending","title":"Design Task Manager","memory":"400.3 MB","code":"auto cmp = [](vector<int>& a, vector<int>& b ) {\n    //[userId, taskId, priority]\n    if(a[2]==b[2]) { //same priority\n        if(a[1]==b[1]) //same task id.\n            return a[0] < b[0];\n        return a[1]<b[1]; //smaller task id.\n    };\n    return a[2] < b[2]; //smaller priority.\n};\nclass TaskManager {\nunordered_map<int, pair<int,int>> taskId2Priority;\npriority_queue<vector<int>, vector<vector<int>>, decltype(cmp)> pq;\npublic:\n    TaskManager(vector<vector<int>>& tasks) {\n        //[userId, taskId, priority],\n        for(auto t: tasks) {\n            pq.push(t);\n            taskId2Priority[t[1]] = {t[0], t[2]};\n        }\n    }\n    \n    void add(int userId, int taskId, int priority) {\n        vector<int> t = {userId, taskId, priority};\n        pq.push(t);\n        taskId2Priority[t[1]] = {t[0], t[2]};\n    }\n    \n    void edit(int taskId, int newPriority) {\n        int userId = taskId2Priority[taskId].first; \n        vector<int> t = {userId, taskId, newPriority};\n        pq.push(t); //duplicate task id.\n        taskId2Priority[t[1]] = {t[0], t[2]};        \n    }\n    \n    void rmv(int taskId) {\n        taskId2Priority[taskId].second = -1;     //[userId, priority]\n    }\n    \n    int execTop() {\n        while(!pq.empty() && taskId2Priority[pq.top()[1]].second != pq.top()[2]) \n                pq.pop();\n        if(pq.empty())\n            return -1;\n        vector<int> t = pq.top(); ////[userId, taskId, priority]\n        taskId2Priority[t[1]].second = -1;\n        pq.pop();\n        return t[0];   \n    }\n};\n\n/**\n * Your TaskManager object will be instantiated and called as such:\n * TaskManager* obj = new TaskManager(tasks);\n * obj->add(userId,taskId,priority);\n * obj->edit(taskId,newPriority);\n * obj->rmv(taskId);\n * int param_4 = obj->execTop();\n */","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"design-task-manager","has_notes":false,"flag_type":1}