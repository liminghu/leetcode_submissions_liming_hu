{"id":1368287052,"question_id":2851,"lang":"javascript","lang_name":"JavaScript","time":"5 months, 2 weeks","timestamp":1724618488,"status":10,"status_display":"Accepted","runtime":"203 ms","url":"/submissions/detail/1368287052/","is_pending":"Not Pending","title":"Convert JSON String to Object","memory":"73.2 MB","code":"/**\n * @param {string} str\n * @return {null|boolean|number|string|Array|Object}\n */\nvar jsonParse = function(str) {\n   let i = 0;\n\n   return parseValue();\n\n   function parseValue() {\n      switch (str[i]) {\n         case '\"':\n            return parseString();\n         case '{':\n            return parseObject();\n         case '[':\n            return parseArray();\n         case 't':\n         case 'f':\n         case 'n':\n            return parseLiteral();\n         default:\n            return parseNumber();\n      }\n   }\n\n   function parseNumber() {\n      let start = i;\n\n      if (str[i] === '-') {\n         i++;\n      }\n\n      while (i < str.length && isDigit(str[i])) {\n         i++;\n      }\n\n      if (str[i] === '.') {\n         i++;\n         while (i < str.length && isDigit(str[i])) {\n            i++;\n         }\n      }\n\n      return Number(str.slice(start, i));\n   }\n\n   function isDigit(n) {\n      return n >= '0' && n <= '9';\n   }\n\n   function parseString() {\n      let result = '';\n      i++;\n\n      while (i < str.length && str[i] != '\"') {\n         result += str[i];\n         i++;\n      }\n\n      i++;\n      return result;\n   }\n\n   function parseObject() {\n      i++;\n\n      const result = {};\n\n      while (i < str.length && str[i] !== '}') {\n         const key = parseString();\n         expectChar(':');\n         const value = parseValue();\n\n         result[key] = value;\n         if (str[i] === ',') {\n            i++;\n         }\n      }\n\n      i++;\n      return result;\n   }\n\n   function parseArray() {\n      i++;\n\n      const result = [];\n\n      while (i < str.length && str[i] !== ']') {\n         const value = parseValue();\n         result.push(value);\n         if (str[i] === ',') {\n            i++;\n         }\n      }\n\n      i++;\n      return result;\n   }\n\n   function parseLiteral() {\n      if (str.startsWith('true', i)) {\n         i += 4; // length of 'true'\n         return true;\n      } else if (str.startsWith('false', i)) {\n         i += 5; // length of 'false'\n         return false;\n      } else if (str.startsWith('null', i)) {\n         i += 4; // length of 'null'\n         return null;\n      }\n   }\n\n   function expectChar(char) {\n      if (str[i] !== char) {\n         throw new Error(`Expected '${char}' at position ${i}`);\n      }\n      i++;\n   }\n}\n","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"convert-json-string-to-object","has_notes":false,"flag_type":1}