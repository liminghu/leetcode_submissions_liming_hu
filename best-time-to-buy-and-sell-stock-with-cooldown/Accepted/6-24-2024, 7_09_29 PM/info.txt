{"id":1299320977,"question_id":309,"lang":"cpp","lang_name":"C++","time":"7 months, 2 weeks","timestamp":1719281369,"status":10,"status_display":"Accepted","runtime":"3 ms","url":"/submissions/detail/1299320977/","is_pending":"Not Pending","title":"Best Time to Buy and Sell Stock with Cooldown","memory":"13.4 MB","code":"class Solution {\npublic:\n/*\nYou are given an array prices where prices[i] is the price of a given stock on the ith day.\nFind the maximum profit you can achieve. You may complete as many transactions as you like \n(i.e., buy one and sell one share of the stock multiple times) with the following restrictions:\n\nAfter you sell your stock, you cannot buy stock on the next day (i.e., cooldown one day).\nNote: You may not engage in multiple transactions simultaneously (i.e., \nyou must sell the stock before you buy again).\n*/\n    int maxProfit(vector<int>& prices) {\n        int held = -INT_MAX; //in this state, the agent holds a stock that it bought at some point before.\n        int sold = -INT_MAX; // in this state, the agent has just sold a stock right before entering this state. And the agent holds no stock at hand.\n        int reset = 0; // first of all, one can consider this state as the starting point, where the agent holds no stock and did not sell a stock before.\n                        //More importantly, it is also the transient state before the held and sold.\n                        //Due to the cooldown rule, after the sold state, the agent can not immediately acquire any stock, but is forced into the reset state.\n                        //One can consider this state as a \"reset\" button for the cycles of buy and sell transactions.\n       /*\n       At any moment, the agent can only be in one state. The agent would transition to another state by performing some actions, namely:\n       action sell: the agent sells a stock at the current moment. After this action, the agent would transition to the sold state.\n       action buy: the agent acquires a stock at the current moment. After this action, the agent would transition to the held state.\n       action rest: this is the action that the agent does no transaction, neither buy or sell. For instance, \n       while holding a stock at the held state, the agent might simply do nothing, and at the next moment the agent would remain in the held state.\n       */\n\n/*\nsold[i]: the previous state of sold can only be held. Therefore, the maximal profits of this state is the maximal profits of the previous state \nplus the revenue by selling the stock at the current price.\nheld[i]\\text{held}[i]held[i]: the previous state of held could also be held, i.e. one does no transaction. Or its previous state could be reset, \nfrom which state, one can acquire a stock at the current price point.\nreset[i]\\text{reset}[i]reset[i]: the previous state of reset could either be reset or sold. Both transitions do not involve any transaction with the stock.\n*/\n        for(int price:prices) {\n            int preSold = sold;\n            sold = held+price;\n            held = max(held, reset-price);\n            reset = max(reset, preSold);\n       }\n\n       return max(sold, reset);\n    }\n};","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"best-time-to-buy-and-sell-stock-with-cooldown","has_notes":false,"flag_type":1}