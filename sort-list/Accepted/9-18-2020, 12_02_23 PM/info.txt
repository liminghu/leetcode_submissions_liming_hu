{"id":397567981,"question_id":148,"lang":"cpp","lang_name":"C++","time":"4 years, 4 months","timestamp":1600455743,"status":10,"status_display":"Accepted","runtime":"56 ms","url":"/submissions/detail/397567981/","is_pending":"Not Pending","title":"Sort List","memory":"15.5 MB","code":"/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     ListNode *next;\n *     ListNode() : val(0), next(nullptr) {}\n *     ListNode(int x) : val(x), next(nullptr) {}\n *     ListNode(int x, ListNode *next) : val(x), next(next) {}\n * };\n */\n\nclass Solution {\npublic:\n  ListNode* sortList(ListNode* head) {\n    if(!head || !head->next) return head;\n    int len = 1;\n    ListNode* cur = head;\n    while(cur) {\n      cur = cur->next;\n      len++;\n    };\n    ListNode dummy(0);\n    dummy.next = head;\n    ListNode* l;\n    ListNode* r;\n    ListNode* tail;\n    for (int n = 1; n < len; n <<=1) {\n      cur = dummy.next; // partial sorted head.\n      tail = &dummy;\n      while(cur) {\n        l = cur;\n        r = split(l, n);\n        cur = split(r, n);\n        auto merged = merge(l, r);\n        tail->next = merged.first;\n        tail = merged.second;\n      }\n    }\n    return dummy.next;\n  }\n\nprivate:\n  //split the list into two parts, first n elemtns and the rest.\n  //returns the head of the rest.\n  ListNode* split(ListNode* head, int n) {\n    while(--n && head)\n        head = head->next;\n    ListNode* rest = head ? head->next : nullptr;\n    if (head) head->next = nullptr;\n    return rest;\n  }\n  pair<ListNode*, ListNode*> merge(ListNode* l1, ListNode* l2) {\n    ListNode dummy(0);\n    ListNode* tail = &dummy;\n    while(l1 && l2) {\n      if(l1->val > l2->val) swap(l1, l2);\n      tail->next = l1;\n      l1 = l1->next;\n      tail = tail->next;\n    }\n    if(l1) tail->next = l1;\n    if(l2) tail->next = l2;\n    while (tail->next) tail = tail->next;\n    return {dummy.next, tail};\n  }\n};","compare_result":"1111111111111111","title_slug":"sort-list","has_notes":false,"flag_type":1}