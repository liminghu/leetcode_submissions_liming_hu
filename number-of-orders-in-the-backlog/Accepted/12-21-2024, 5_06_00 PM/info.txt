{"id":1484987463,"question_id":1928,"lang":"cpp","lang_name":"C++","time":"1 month, 2 weeks","timestamp":1734829560,"status":10,"status_display":"Accepted","runtime":"171 ms","url":"/submissions/detail/1484987463/","is_pending":"Not Pending","title":"Number of Orders in the Backlog","memory":"68.2 MB","code":"using PII = pair<int, int>;\nclass Solution {\npublic:\n    int getNumberOfBacklogOrders(vector<vector<int>>& orders) {//orders[i] = [pricei, amounti, orderTypei]\n        //orderTypei: 0(buy), 1(sell)\n        priority_queue<PII, vector<PII>, greater<>> sell_pq;   //pricei, amounti\n        priority_queue<PII, vector<PII>> buy_pq;   //pricei, amounti      \n        long count = 0;\n        long M = 1e9+7;\n        for(auto order:orders) {\n            int pricei = order[0]; \n            int amounti = order[1];\n            int orderTypei = order[2];\n            count = (count+amounti)%M;\n            if(orderTypei==0) { //buy\n                while(!sell_pq.empty() && amounti>0 && sell_pq.top().first <=pricei) {\n                    auto [s_price, s_amount] = sell_pq.top();\n                    sell_pq.pop();\n                    long num = min(s_amount, amounti);\n                    s_amount -= num;\n                    amounti -= num;\n                    count = (count-num*2+M)%M;\n                    if(s_amount > 0)\n                        sell_pq.push({s_price, s_amount});            \n                }\n                if(amounti>0)\n                    buy_pq.push({pricei, amounti});\n            } else { //sell\n                while(!buy_pq.empty() && amounti>0 && buy_pq.top().first >=pricei) {\n                    auto [b_price, b_amount] = buy_pq.top();\n                    buy_pq.pop();\n                    long num = min(b_amount, amounti);\n                    b_amount -= num;\n                    amounti -= num;\n                    count = (count-num*2+M)%M;\n                    if(b_amount > 0)\n                        buy_pq.push({b_price, b_amount});            \n                }\n                if(amounti>0)\n                    sell_pq.push({pricei, amounti});\n            }   \n        }\n        return count;\n    }\n};","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"number-of-orders-in-the-backlog","has_notes":false,"flag_type":1}