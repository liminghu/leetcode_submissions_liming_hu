{"id":1433578383,"question_id":399,"lang":"cpp","lang_name":"C++","time":"3 months, 2 weeks","timestamp":1729877645,"status":10,"status_display":"Accepted","runtime":"2 ms","url":"/submissions/detail/1433578383/","is_pending":"Not Pending","title":"Evaluate Division","memory":"11.3 MB","code":"class Solution {\npublic:\n    vector<double> calcEquation(vector<vector<string>>& equations, vector<double>& values, vector<vector<string>>& queries) {\n        //equations[i] = [Ai, Bi] and values[i] represent the equation Ai / Bi = values[i]. Each Ai or Bi is a string that represents a single variable.\n        int n = equations.size();\n        unordered_set<string> visited;\n        unordered_map<string, unordered_map<string, double>> ValDict;\n        for(int i=0; i<n; i++) {\n            ValDict[ equations[i][0] ][ equations[i][1] ] = values[i];\n            //equations[0] equations[1]\n            \n            ValDict[equations[i][1]][equations[i][0]] = 1.0/values[i];     \n            \n        }\n\n        vector<double> rets;\n        for(auto query:queries) {\n            if(ValDict.find(query[0])==ValDict.end() || ValDict.find(query[1])==ValDict.end()) {\n                rets.push_back(-1.0);\n                continue;\n            }\n            unordered_set<string> visited;\n            string val1 = query[0];\n            string val2 = query[1];\n            rets.push_back(divide(val1, val2, ValDict, visited));\n        }\n        return rets;\n    }\n    double divide(string& X, string& Y, unordered_map<string, unordered_map<string, double>>& ValDict, unordered_set<string>& visited) {\n        if(X==Y)\n            return 1.0;\n        visited.insert(X);\n        for(auto& pair: ValDict[X]) {\n            string C = pair.first;\n            if(visited.count(C))\n                continue;\n            double d = divide(C, Y, ValDict, visited);    //d = C/Y\n            if(d>0)\n                return ValDict[X][C] * d;\n        }\n        return -1.0;\n    }\n};","compare_result":"1111111111111111111111111111","title_slug":"evaluate-division","has_notes":false,"flag_type":1}