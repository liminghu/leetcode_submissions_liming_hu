{"id":392926568,"question_id":399,"lang":"cpp","lang_name":"C++","time":"4 years, 5 months","timestamp":1599591783,"status":10,"status_display":"Accepted","runtime":"0 ms","url":"/submissions/detail/392926568/","is_pending":"Not Pending","title":"Evaluate Division","memory":"7.3 MB","code":"class Solution {\npublic:\n    vector<double> calcEquation(vector<vector<string>>& equations, vector<double>& values, vector<vector<string>>& queries) {\n\t\t//DFS+Graph.\n\t\t//g[A][B] = k, A/B = k\n\t\tunordered_map<string, unordered_map<string, double>> g;\n\t\tfor (int i=0; i<equations.size(); i++) {\n\t\t\tconst string& A = equations[i][0]; //first\n\t\t\tconst string& B = equations[i][1]; //second\n\t\t\tconst double k = values[i];\n\t\t\tg[A][B] = k;\n\t\t\tg[B][A] = 1.0 / k;\n\t\t};\n\t\t\n\t\tvector<double> ans;\n\t\tfor(vector<string> pair: queries) {\n\t\t\tconst string& X = pair[0]; //first\n\t\t\tconst string& Y = pair[1]; //second\t\n\t\t\tif(!g.count(X) || !g.count(Y)) {\n\t\t\t\tans.push_back(-1.0);\n\t\t\t\tcontinue;\n\t\t\t};\n\t\t\tunordered_set<string> visited;\n\t\t\tans.push_back(divide(X, Y, g, visited));\n\t\t};\n\t\t\n\t\treturn ans;        \n    };\nprivate: //get result of X/Y\n\tdouble divide(const string& X, const string& Y, unordered_map<string, unordered_map<string, double>>& g, unordered_set<string>& visited) {\n\t\tif(X == Y) \n\t\t\treturn 1.0;\n\t\tvisited.insert(X);\n\t\tfor(const auto& pair: g[X]) {\n\t\t\tconst string& C = pair.first; //first\n\t\t\tif(visited.count(C)) \n\t\t\t\tcontinue;\n\t\t\tdouble d = divide(C, Y, g, visited); //d=C/Y;\n\t\t\t// X/Y = C/Y * X/C;\n            if( d > 0 ) return d*g[X][C];\t\t\t\n\t\t}\n\t\treturn -1.0;\n\t}\n};","compare_result":"11111111111","title_slug":"evaluate-division","has_notes":false,"flag_type":1}